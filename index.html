<!DOCTYPE html>
<html lang="lt">
<head>
  <meta charset="UTF-8">
  <title>Fail≈≥ nar≈°yklƒó</title>
  <style>
    body { font-family: Arial, sans-serif; background: #fafafa; padding: 20px; }
    h1 { margin-bottom: 20px; font-size: 20px; color: #333; }
    .file-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 20px;
    }
    .file {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px;
      border-radius: 8px;
      background: white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      transition: 0.2s;
      text-align: center;
      text-decoration: none;
      color: #333;
    }
    .file:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.15); transform: translateY(-2px); }
    .file-icon { font-size: 40px; margin-bottom: 10px; }
    .file-name { font-size: 14px; word-wrap: break-word; }
    .back-link { margin-bottom: 20px; display: inline-block; }
  </style>
</head>
<body>
  <h1>Jung signatures</h1>
  <div id="back"></div>
  <div class="file-grid" id="failu-sarasas"></div>

  <script>
    const user = "tomaslt992";
    const repo = "Jung-parasai";
    const branch = "main";

    // pasiimam URL param "path"
    const urlParams = new URLSearchParams(window.location.search);
    const currentPath = urlParams.get("path") || "";

    // API URL
    const apiUrl = `https://api.github.com/repos/${user}/${repo}/contents/${currentPath}`;

    fetch(apiUrl)
      .then(res => res.json())
      .then(files => {
        let list = document.getElementById("failu-sarasas");

        // jei esame subfolderyje -> rodome "grƒØ≈æti atgal"
        if (currentPath) {
          let backDiv = document.getElementById("back");
          let parentPath = currentPath.split("/").slice(0, -1).join("/");
          let backLink = document.createElement("a");
          backLink.href = parentPath ? `?path=${parentPath}` : "index.html";
          backLink.innerText = "‚¨Ö GrƒØ≈æti atgal";
          backLink.className = "back-link";
          backDiv.appendChild(backLink);
        }

        files.forEach(file => {
          let a = document.createElement("a");
          a.className = "file";

          let icon = document.createElement("div");
          icon.className = "file-icon";

          let name = document.createElement("div");
          name.className = "file-name";
          name.innerText = file.name;

          if (file.type === "file" && file.name.endsWith(".html")) {
            a.href = file.path; // GitHub Pages atidarys HTML
            icon.innerHTML = "üìÑ";
          }
          else if (file.type === "dir") {
            a.href = `?path=${file.path}`;
            icon.innerHTML = "üìÅ";
          } else {
            return;
          }

          a.appendChild(icon);
          a.appendChild(name);
          list.appendChild(a);
        });
      });
  </script>
</body>
</html>
